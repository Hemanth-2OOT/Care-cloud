{% extends "base.html" %}

{% block title %}
{{ 'Login' if mode == 'login' else 'Sign Up' }} | CareCloud
{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-card">

    <h1>
      {{ 'Welcome Back' if mode == 'login' else 'Create Your CareCloud Account' }}
    </h1>

    <p class="auth-subtitle">
      {{ 'Sign in to continue protecting your digital space'
         if mode == 'login'
         else 'Join CareCloud for a safer, kinder online experience' }}
    </p>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash-messages">
          {% for msg in messages %}
            <div class="flash">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form
      method="POST"
      action="{{ url_for('login') if mode == 'login' else url_for('signup') }}"
      novalidate
    >

      {% if mode == 'signup' %}
      <div class="form-group">
        <label for="name">Full Name</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="John Doe"
          required
        >
      </div>
      {% endif %}

      <div class="form-group">
        <label for="email">Email Address</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="you@example.com"
          required
        >
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          name="password"
          placeholder="••••••••"
          minlength="6"
          required
        >
      </div>

      {% if mode == 'signup' %}
      <div class="form-group">
        <label for="parent_email">Parent / Guardian Email</label>
        <input
          type="email"
          id="parent_email"
          name="parent_email"
          placeholder="parent@example.com"
          required
        >
        <small class="hint">
          Used only if serious harmful content is detected.
        </small>
      </div>
      {% endif %}

      <button type="submit" class="btn-primary">
        {{ 'Login' if mode == 'login' else 'Create Account' }}
      </button>
    </form>

    <div class="auth-footer">
      {% if mode == 'login' %}
        <p>
          Don’t have an account?
          <a href="{{ url_for('signup') }}">Sign up</a>
        </p>
      {% else %}
        <p>
          Already have an account?
          <a href="{{ url_for('login') }}">Login</a>
        </p>
      {% endif %}
    </div>

  </div>
</div>
{% endblock %}

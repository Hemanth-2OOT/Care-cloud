{% extends "base.html" %}
{% block title %}
{{ 'Login' if mode == 'login' else 'Sign Up' }} | CareCloud
{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-card">

    <h1>
      {{ 'Welcome Back' if mode == 'login' else 'Create Your CareCloud Account' }}
    </h1>

    <p class="auth-subtitle">
      {{ 'Sign in to continue protecting your digital space'
         if mode == 'login'
         else 'Join CareCloud for a safer, kinder online experience' }}
    </p>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash-messages">
          {% for msg in messages %}
            <div class="flash">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form
      method="POST"
      action="{{ url_for('login') if mode == 'login' else url_for('signup') }}"
    >

      {% if mode == 'signup' %}
      <div class="form-group">
        <label>Full Name</label>
        <input type="text" name="name" required>
      </div>
      {% endif %}

      <div class="form-group">
        <label>Email</label>
        <input type="email" name="email" required>
      </div>

      <div class="form-group">
        <label>Password</label>
        <input type="password" name="password" required minlength="6">
      </div>

      {% if mode == 'signup' %}
      <div class="form-group">
        <label>Parent / Guardian Email</label>
        <input type="email" name="parent_email" required>
        <small class="hint">
          Used only for serious safety alerts.
        </small>
      </div>
      {% endif %}

      <button type="submit" class="btn-primary">
        {{ 'Login' if mode == 'login' else 'Create Account' }}
      </button>
    </form>

    <div class="auth-footer">
      {% if mode == 'login' %}
        <p>Donâ€™t have an account? <a href="{{ url_for('signup') }}">Sign up</a></p>
      {% else %}
        <p>Already have an account? <a href="{{ url_for('login') }}">Login</a></p>
      {% endif %}
    </div>

  </div>
</div>
{% endblock %}
